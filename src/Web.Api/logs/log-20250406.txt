2025-04-06 13:36:59.276 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 13:37:00.003 +04:00 [INF] Creating key {81d83c68-abc8-4f57-a1cb-3f6624041738} with creation date 2025-04-06 09:36:59Z, activation date 2025-04-06 09:36:59Z, and expiration date 2025-07-05 09:36:59Z.
2025-04-06 13:37:01.524 +04:00 [INF] Writing data to file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-81d83c68-abc8-4f57-a1cb-3f6624041738.xml'.
2025-04-06 13:37:05.265 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 13:37:05.326 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 13:37:05.885 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 13:37:05.934 +04:00 [INF] Hosting environment: Development
2025-04-06 13:37:05.979 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 13:40:54.202 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7289/api/auth/login - application/json 50
2025-04-06 13:40:54.966 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-06 13:40:54.996 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-06 13:40:55.027 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7289/api/auth/login - 405 0 null 876.6252ms
2025-04-06 13:41:24.611 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 65
2025-04-06 13:41:24.644 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 13:41:25.111 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Commands.LoginCommand.UserRegisterOrLoginCommand) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 13:41:25.478 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-06 13:41:25.686 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 539.8965ms
2025-04-06 13:41:25.720 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 13:41:25.729 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 400 null application/problem+json; charset=utf-8 1118.8835ms
2025-04-06 13:41:57.455 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 99
2025-04-06 13:41:57.473 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 13:41:57.477 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Commands.LoginCommand.UserRegisterOrLoginCommand) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 13:42:04.024 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 13:42:13.377 +04:00 [WRN] The foreign key property 'SecurityDetails.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-04-06 13:42:19.092 +04:00 [INF] Executed DbCommand (647ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 13:42:20.462 +04:00 [INF] Executed DbCommand (30ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM [Users] AS [u]
LEFT JOIN [UserRoles] AS [u0] ON [u].[Id] = [u0].[UserId]
WHERE [u].[Email] = @__email_0
ORDER BY [u].[Id]
2025-04-06 13:42:20.603 +04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 13:42:21.636 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at lambda_method198(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Core.Infrastructure.Persistence.Users.Features.Manager.UserManager.Login(String email, String ipAddress) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Manager\UserManager.cs:line 37
   at Core.Infrastructure.Persistence.Users.Features.Commands.LoginCommand.UserRegisterCommandHandler.ExecuteAsync(UserRegisterOrLoginCommand request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Commands\LoginCommand\UserRegisterCommandHandler.cs:line 24
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 18
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 13:50:25.253 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 13:50:27.232 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 13:50:27.243 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 13:50:27.668 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 13:50:27.674 +04:00 [INF] Hosting environment: Development
2025-04-06 13:50:27.755 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 13:52:15.452 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 13:52:16.507 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 13:52:16.970 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(System.String) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 13:52:17.467 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-06 13:52:17.627 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 444.2615ms
2025-04-06 13:52:17.706 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 13:52:17.719 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 400 null application/problem+json; charset=utf-8 2302.9736ms
2025-04-06 13:56:14.490 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 13:56:16.909 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 13:56:16.914 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 13:56:17.257 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 13:56:17.286 +04:00 [INF] Hosting environment: Development
2025-04-06 13:56:17.291 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 13:57:20.882 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 13:57:21.505 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 13:57:21.745 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 13:57:29.328 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 13:57:43.036 +04:00 [WRN] The foreign key property 'SecurityDetails.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-04-06 13:58:08.329 +04:00 [INF] Executed DbCommand (374ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 13:58:11.826 +04:00 [INF] Executed DbCommand (106ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 13:59:10.734 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '144' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at Core.Infrastructure.Securities.JwtTokenHelper.GenerateAccessToken(User user, List`1 roles) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Securities\JwtTokenHelper.cs:line 28
   at Core.Infrastructure.Persistence.Users.Features.Manager.UserManager.Login(String email, String ipAddress) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Manager\UserManager.cs:line 37
   at Core.Infrastructure.Persistence.Users.Features.Commands.LoginCommand.UserRegisterCommandHandler.ExecuteAsync(UserRegisterOrLoginCommand request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Commands\LoginCommand\UserRegisterCommandHandler.cs:line 24
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 18
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 13:59:32.844 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 131011.8171ms
2025-04-06 14:02:25.074 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:02:26.424 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:02:26.428 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:02:26.842 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:02:26.848 +04:00 [INF] Hosting environment: Development
2025-04-06 14:02:26.851 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:03:11.715 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:03:13.055 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:03:13.062 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:03:14.125 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:03:15.364 +04:00 [INF] Hosting environment: Development
2025-04-06 14:03:15.586 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:03:27.992 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:03:28.449 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:03:28.572 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:03:33.000 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:03:44.856 +04:00 [WRN] The foreign key property 'SecurityDetails.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-04-06 14:03:50.004 +04:00 [INF] Executed DbCommand (178ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:03:51.830 +04:00 [INF] Executed DbCommand (42ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:04:48.592 +04:00 [ERR] Failed executing DbCommand (514ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 6), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p19='?' (DbType = Guid), @p10='?' (Size = 500), @p11='?' (Size = 50), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OTPs] ([Id], [CreatedDate], [IPAddress], [ModifiedDate], [OTPCode], [OTPExpiryDate], [RefreshToken], [RefreshTokenExpirationDate], [UserId], [UserId1])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [Users] SET [Bio] = @p10, [Country] = @p11, [CreatedDate] = @p12, [DateOfBirth] = @p13, [Email] = @p14, [FirstName] = @p15, [Gender] = @p16, [LastName] = @p17, [ModifiedDate] = @p18
OUTPUT 1
WHERE [Id] = @p19;
2025-04-06 14:04:48.766 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Core.Infrastructure.Persistence.Users.Context.UserDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTPs'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d0d1b7c1-8ff9-47bf-9e0e-005dd2bb3415
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTPs'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d0d1b7c1-8ff9-47bf-9e0e-005dd2bb3415
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-06 14:04:54.232 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTPs'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d0d1b7c1-8ff9-47bf-9e0e-005dd2bb3415
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Core.Application.Repositories.UnitOfWork`1.CommitAsync(CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Repositories\UnitOfWork.cs:line 11
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 24
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 14:06:09.097 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 160509.0983ms
2025-04-06 14:06:37.802 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:06:40.023 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:06:40.062 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:06:40.642 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:06:41.026 +04:00 [INF] Hosting environment: Development
2025-04-06 14:06:41.029 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:06:57.105 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:06:57.888 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:06:58.184 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:06:58.525 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:07:06.190 +04:00 [WRN] The foreign key property 'SecurityDetails.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-04-06 14:07:10.726 +04:00 [INF] Executed DbCommand (273ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:07:11.136 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:07:17.840 +04:00 [ERR] Failed executing DbCommand (447ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 6), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p19='?' (DbType = Guid), @p10='?' (Size = 500), @p11='?' (Size = 50), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [SecurityDetails] ([Id], [CreatedDate], [IPAddress], [ModifiedDate], [OTPCode], [OTPExpiryDate], [RefreshToken], [RefreshTokenExpirationDate], [UserId], [UserId1])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [Users] SET [Bio] = @p10, [Country] = @p11, [CreatedDate] = @p12, [DateOfBirth] = @p13, [Email] = @p14, [FirstName] = @p15, [Gender] = @p16, [LastName] = @p17, [ModifiedDate] = @p18
OUTPUT 1
WHERE [Id] = @p19;
2025-04-06 14:07:17.958 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Core.Infrastructure.Persistence.Users.Context.UserDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'UserId1'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0ac6b0dd-6dc3-4628-a7ec-bf0ecd309d79
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'UserId1'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0ac6b0dd-6dc3-4628-a7ec-bf0ecd309d79
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-06 14:07:22.876 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'UserId1'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0ac6b0dd-6dc3-4628-a7ec-bf0ecd309d79
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Core.Application.Repositories.UnitOfWork`1.CommitAsync(CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Repositories\UnitOfWork.cs:line 11
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 24
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 14:09:07.108 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:09:08.220 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:09:08.226 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:09:08.631 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:09:08.636 +04:00 [INF] Hosting environment: Development
2025-04-06 14:09:08.639 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:10:00.154 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:10:00.688 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:10:01.107 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:10:01.591 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:10:09.058 +04:00 [WRN] The foreign key property 'SecurityDetails.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-04-06 14:10:13.938 +04:00 [INF] Executed DbCommand (262ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:10:14.221 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:10:24.893 +04:00 [ERR] Failed executing DbCommand (163ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 6), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p19='?' (DbType = Guid), @p10='?' (Size = 500), @p11='?' (Size = 50), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 50), @p16='?' (DbType = Int32), @p17='?' (Size = 50), @p18='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [SecurityDetails] ([Id], [CreatedDate], [IPAddress], [ModifiedDate], [OTPCode], [OTPExpiryDate], [RefreshToken], [RefreshTokenExpirationDate], [UserId], [UserId1])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [Users] SET [Bio] = @p10, [Country] = @p11, [CreatedDate] = @p12, [DateOfBirth] = @p13, [Email] = @p14, [FirstName] = @p15, [Gender] = @p16, [LastName] = @p17, [ModifiedDate] = @p18
OUTPUT 1
WHERE [Id] = @p19;
2025-04-06 14:10:25.266 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Core.Infrastructure.Persistence.Users.Context.UserDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'UserId1'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9a7fc9c-ed71-4b90-ac61-64efad1a09ba
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'UserId1'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9a7fc9c-ed71-4b90-ac61-64efad1a09ba
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-06 14:10:30.969 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'UserId1'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d9a7fc9c-ed71-4b90-ac61-64efad1a09ba
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Core.Application.Repositories.UnitOfWork`1.CommitAsync(CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Repositories\UnitOfWork.cs:line 11
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 24
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 14:17:59.500 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:18:02.413 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:18:02.474 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:18:03.227 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:18:03.290 +04:00 [INF] Hosting environment: Development
2025-04-06 14:18:03.303 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:18:04.602 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:18:05.139 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:18:05.325 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:18:05.688 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:18:18.281 +04:00 [INF] Executed DbCommand (181ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:18:18.605 +04:00 [INF] Executed DbCommand (40ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:19:51.447 +04:00 [ERR] Failed executing DbCommand (336ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 6), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (Size = 500), @p10='?' (Size = 50), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 50), @p17='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [SecurityDetails] ([Id], [CreatedDate], [IPAddress], [ModifiedDate], [OTPCode], [OTPExpiryDate], [RefreshToken], [RefreshTokenExpirationDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [Users] SET [Bio] = @p9, [Country] = @p10, [CreatedDate] = @p11, [DateOfBirth] = @p12, [Email] = @p13, [FirstName] = @p14, [Gender] = @p15, [LastName] = @p16, [ModifiedDate] = @p17
OUTPUT 1
WHERE [Id] = @p18;
2025-04-06 14:19:51.713 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Core.Infrastructure.Persistence.Users.Context.UserDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_SecurityDetails_Users_UserId". The conflict occurred in database "LoginApplicationDb", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3d619dc3-598b-4b98-8677-340876e4cb81
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_SecurityDetails_Users_UserId". The conflict occurred in database "LoginApplicationDb", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3d619dc3-598b-4b98-8677-340876e4cb81
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-06 14:19:57.617 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_SecurityDetails_Users_UserId". The conflict occurred in database "LoginApplicationDb", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3d619dc3-598b-4b98-8677-340876e4cb81
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Core.Application.Repositories.UnitOfWork`1.CommitAsync(CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Repositories\UnitOfWork.cs:line 11
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 24
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 14:29:42.478 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:29:43.958 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:29:43.964 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:29:44.296 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:29:44.424 +04:00 [INF] Hosting environment: Development
2025-04-06 14:29:45.427 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:30:01.026 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:30:03.078 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:30:03.561 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:30:04.343 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:30:15.346 +04:00 [INF] Executed DbCommand (490ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:30:16.268 +04:00 [INF] Executed DbCommand (69ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:30:17.542 +04:00 [INF] Executed DbCommand (110ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 500), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (Size = 50), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Bio], [Country], [CreatedDate], [DateOfBirth], [Email], [FirstName], [Gender], [LastName], [ModifiedDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-04-06 14:31:16.761 +04:00 [INF] Executed DbCommand (229ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 6), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (Size = 500), @p10='?' (Size = 50), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 50), @p17='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [SecurityDetails] SET [CreatedDate] = @p0, [IPAddress] = @p1, [ModifiedDate] = @p2, [OTPCode] = @p3, [OTPExpiryDate] = @p4, [RefreshToken] = @p5, [RefreshTokenExpirationDate] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
UPDATE [Users] SET [Bio] = @p9, [Country] = @p10, [CreatedDate] = @p11, [DateOfBirth] = @p12, [Email] = @p13, [FirstName] = @p14, [Gender] = @p15, [LastName] = @p16, [ModifiedDate] = @p17
OUTPUT 1
WHERE [Id] = @p18;
2025-04-06 14:31:22.078 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Core.Application.Repositories.UnitOfWork`1.CommitAsync(CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Repositories\UnitOfWork.cs:line 11
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 24
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 14:38:16.830 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:38:22.724 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:38:22.758 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:38:23.179 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:38:23.200 +04:00 [INF] Hosting environment: Development
2025-04-06 14:38:23.203 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:38:27.243 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:38:28.261 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:38:28.733 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:38:29.390 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:38:40.741 +04:00 [ERR] Failed executing DbCommand (205ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u1].[RowVersion], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate], [u].[RowVersion]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:38:40.852 +04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Core.Infrastructure.Persistence.Users.Context.UserDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'RowVersion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:b55baaf3-d77f-46c1-82e9-e3330cb77a8a
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'RowVersion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:b55baaf3-d77f-46c1-82e9-e3330cb77a8a
Error Number:207,State:1,Class:16
2025-04-06 14:38:43.583 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'RowVersion'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method61(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Core.Infrastructure.Persistence.Users.Features.Manager.UserManager.Login(String email, String ipAddress, IUserUnitOfWork uOw) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Manager\UserManager.cs:line 29
   at Core.Infrastructure.Persistence.Users.Features.Commands.LoginCommand.UserRegisterCommandHandler.ExecuteAsync(UserRegisterOrLoginCommand request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Commands\LoginCommand\UserRegisterCommandHandler.cs:line 26
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 18
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
ClientConnectionId:b55baaf3-d77f-46c1-82e9-e3330cb77a8a
Error Number:207,State:1,Class:16
2025-04-06 14:39:39.947 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:39:42.686 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:39:42.916 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:39:43.295 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:39:43.591 +04:00 [INF] Hosting environment: Development
2025-04-06 14:39:43.606 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:39:58.623 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:39:59.633 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:40:00.086 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:40:00.598 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:40:14.124 +04:00 [INF] Executed DbCommand (419ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:40:14.593 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:40:21.337 +04:00 [INF] Executed DbCommand (74ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 14:41:26.266 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 14:41:26.397 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 14:41:26.744 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 86532.9479ms
2025-04-06 14:41:32.071 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:41:32.229 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 93639.7899ms
2025-04-06 14:51:04.538 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:51:06.084 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:51:06.090 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:51:06.463 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:51:06.470 +04:00 [INF] Hosting environment: Development
2025-04-06 14:51:06.474 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:51:20.303 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:51:21.802 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:51:22.013 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:51:22.836 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:51:38.207 +04:00 [INF] Executed DbCommand (356ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:51:38.731 +04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:51:40.357 +04:00 [INF] Executed DbCommand (262ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 14:51:41.516 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 14:51:41.777 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 14:51:42.271 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 19946.8418ms
2025-04-06 14:51:42.306 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:51:43.240 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 22965.2683ms
2025-04-06 14:55:58.362 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 14:56:01.533 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 14:56:01.714 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 14:56:02.151 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 14:56:02.251 +04:00 [INF] Hosting environment: Development
2025-04-06 14:56:02.270 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 14:57:05.184 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:57:05.812 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:57:06.074 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:57:06.431 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:57:19.062 +04:00 [INF] Executed DbCommand (360ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:57:19.542 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:57:21.480 +04:00 [INF] Executed DbCommand (370ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 14:57:25.054 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 14:57:25.124 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 14:57:25.591 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 19466.1024ms
2025-04-06 14:57:25.621 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:57:25.849 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 20687.8585ms
2025-04-06 14:57:47.045 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:57:47.203 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:57:47.215 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:57:47.231 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:57:47.710 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:57:47.835 +04:00 [INF] Executed DbCommand (73ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:57:47.877 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 14:58:08.445 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 14:58:08.465 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 14:58:08.480 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 21253.7402ms
2025-04-06 14:58:08.500 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:58:09.286 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 22241.8472ms
2025-04-06 14:58:13.117 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 14:58:13.294 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:58:13.316 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 14:58:13.361 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 14:58:13.532 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 14:58:13.625 +04:00 [INF] Executed DbCommand (26ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 14:58:13.704 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 14:59:31.387 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 14:59:31.576 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 14:59:31.589 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 78234.8028ms
2025-04-06 14:59:31.601 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 14:59:32.324 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 79205.1949ms
2025-04-06 15:14:26.608 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 15:14:28.998 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 15:14:29.464 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 15:14:30.256 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 15:14:30.651 +04:00 [INF] Hosting environment: Development
2025-04-06 15:14:30.653 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 15:14:34.241 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 15:14:34.915 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:14:35.657 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 15:14:36.429 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 15:15:01.344 +04:00 [INF] Executed DbCommand (862ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 15:15:01.671 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 15:15:03.810 +04:00 [INF] Executed DbCommand (190ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 15:15:05.671 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 15:15:06.990 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 15:15:07.357 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 31359.2406ms
2025-04-06 15:15:07.498 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:15:07.550 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 33330.7412ms
2025-04-06 15:16:26.692 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 15:16:26.744 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:16:26.761 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 15:16:26.840 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 15:16:27.236 +04:00 [INF] Executed DbCommand (41ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 15:16:27.298 +04:00 [INF] Executed DbCommand (22ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 15:16:27.402 +04:00 [INF] Executed DbCommand (70ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 15:16:27.618 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 15:16:27.660 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 15:16:27.690 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 867.234ms
2025-04-06 15:16:27.712 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:16:27.861 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 1168.6789ms
2025-04-06 15:16:34.580 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 15:16:34.619 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:16:34.622 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 15:16:34.639 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 15:16:34.861 +04:00 [INF] Executed DbCommand (97ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 15:16:34.920 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 15:16:34.997 +04:00 [INF] Executed DbCommand (61ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 15:16:35.336 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 15:16:35.392 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 15:16:35.414 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 780.7599ms
2025-04-06 15:16:35.417 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:16:35.425 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 845.2024ms
2025-04-06 15:32:13.430 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 15:32:13.449 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:32:13.452 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 15:32:13.460 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 15:32:13.498 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 15:32:13.515 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 15:32:13.539 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 15:32:13.717 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 15:32:13.721 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 15:32:13.729 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 270.4241ms
2025-04-06 15:32:13.737 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:32:13.743 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 312.9967ms
2025-04-06 15:35:20.260 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 15:35:52.189 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 15:35:52.196 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 15:35:56.567 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 15:35:57.700 +04:00 [INF] Hosting environment: Development
2025-04-06 15:36:00.714 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 15:37:07.220 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 15:37:07.759 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:37:08.063 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 15:37:08.293 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 15:38:55.829 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at RabbitMQ.Client.Impl.Channel.OpenAsync(CreateChannelOptions createChannelOptions, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.RecoveryAwareChannel.CreateAndOpenAsync(ISession session, CreateChannelOptions createChannelOptions, CancellationToken cancellationToken)
   at RabbitMQ.Client.Framing.AutorecoveringConnection.CreateChannelAsync(CreateChannelOptions createChannelOptions, CancellationToken cancellationToken)
   at EventBus.RabbitMQ.RabbitMQPersistenceConnection.CreateChannel() in C:\Users\User\Desktop\PRO-JECT\src\EventBus.RabbitMQ\RabbitMQPersistenceConnection.cs:line 15
   at EventBus.RabbitMQ.EventBusRabbitMQ.CreateConsumerChannel() in C:\Users\User\Desktop\PRO-JECT\src\EventBus.RabbitMQ\EventBusRabbitMQ.cs:line 141
   at EventBus.RabbitMQ.EventBusRabbitMQ..ctor(IServiceProvider serviceProvider, EventBusConfig config) in C:\Users\User\Desktop\PRO-JECT\src\EventBus.RabbitMQ\EventBusRabbitMQ.cs:line 43
   at EventBus.Factory.EventBusFactory.Create(EventBusConfig config, IServiceProvider provider) in C:\Users\User\Desktop\PRO-JECT\src\EventBus.Factory\EventBusFactory.cs:line 14
   at Core.Application.ApplicationExtensions.<>c__DisplayClass0_0.<AddApplication>b__0(IServiceProvider provider) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\ApplicationExtensions.cs:line 16
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 15:40:14.204 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 186119.0886ms
2025-04-06 15:40:14.221 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:40:14.242 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at RabbitMQ.Client.Impl.Channel.OpenAsync(CreateChannelOptions createChannelOptions, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.RecoveryAwareChannel.CreateAndOpenAsync(ISession session, CreateChannelOptions createChannelOptions, CancellationToken cancellationToken)
   at RabbitMQ.Client.Framing.AutorecoveringConnection.CreateChannelAsync(CreateChannelOptions createChannelOptions, CancellationToken cancellationToken)
   at EventBus.RabbitMQ.RabbitMQPersistenceConnection.CreateChannel() in C:\Users\User\Desktop\PRO-JECT\src\EventBus.RabbitMQ\RabbitMQPersistenceConnection.cs:line 15
   at EventBus.RabbitMQ.EventBusRabbitMQ.CreateConsumerChannel() in C:\Users\User\Desktop\PRO-JECT\src\EventBus.RabbitMQ\EventBusRabbitMQ.cs:line 141
   at EventBus.RabbitMQ.EventBusRabbitMQ..ctor(IServiceProvider serviceProvider, EventBusConfig config) in C:\Users\User\Desktop\PRO-JECT\src\EventBus.RabbitMQ\EventBusRabbitMQ.cs:line 43
   at EventBus.Factory.EventBusFactory.Create(EventBusConfig config, IServiceProvider provider) in C:\Users\User\Desktop\PRO-JECT\src\EventBus.Factory\EventBusFactory.cs:line 14
   at Core.Application.ApplicationExtensions.<>c__DisplayClass0_0.<AddApplication>b__0(IServiceProvider provider) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\ApplicationExtensions.cs:line 16
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
   at Web.Api.Controllers.AuthController.SignIn(LoginDto login) in C:\Users\User\Desktop\PRO-JECT\src\Web.Api\Controllers\AuthController.cs:line 17
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-06 15:40:25.347 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 500 null text/plain; charset=utf-8 198146.8519ms
2025-04-06 15:43:51.742 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 15:46:45.821 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 15:48:50.274 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 15:48:51.700 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 15:48:51.786 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 15:48:52.944 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 15:48:54.878 +04:00 [INF] Hosting environment: Development
2025-04-06 15:48:54.916 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 15:49:19.318 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 15:49:20.124 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:49:20.520 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 15:49:20.932 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 15:49:34.214 +04:00 [INF] Executed DbCommand (342ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 15:49:34.609 +04:00 [INF] Executed DbCommand (70ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 15:49:36.214 +04:00 [INF] Executed DbCommand (219ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 15:49:37.231 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 15:49:37.315 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 15:49:37.623 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 17010.1928ms
2025-04-06 15:49:37.715 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 15:49:37.939 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 18642.896ms
2025-04-06 15:55:59.861 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 15:57:40.722 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:03:30.070 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:03:34.009 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:03:34.149 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:03:34.580 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:03:35.034 +04:00 [INF] Hosting environment: Development
2025-04-06 16:03:35.090 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:04:04.242 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 16:04:04.887 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 16:04:05.197 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 16:04:05.666 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 16:04:19.971 +04:00 [INF] Executed DbCommand (233ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 16:04:20.475 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 16:04:22.116 +04:00 [INF] Executed DbCommand (259ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 16:04:23.017 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 16:04:23.139 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 16:04:23.454 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 18125.6388ms
2025-04-06 16:04:25.970 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 16:04:26.209 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 21997.008ms
2025-04-06 16:16:48.577 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:16:50.110 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:16:50.118 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:16:50.509 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:16:50.543 +04:00 [INF] Hosting environment: Development
2025-04-06 16:16:50.549 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:17:22.995 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 16:17:23.878 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 16:17:24.113 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 16:17:24.905 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 16:17:40.767 +04:00 [INF] Executed DbCommand (394ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 16:17:41.256 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 16:17:42.622 +04:00 [INF] Executed DbCommand (123ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 16:17:43.393 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 16:17:43.435 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 16:17:43.725 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 19170.0985ms
2025-04-06 16:17:43.917 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 16:17:44.013 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 21044.3342ms
2025-04-06 16:21:56.607 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:22:01.381 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:22:03.101 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:22:15.325 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:22:27.731 +04:00 [INF] Hosting environment: Development
2025-04-06 16:22:27.743 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:28:10.983 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:28:12.458 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:28:12.465 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:28:13.520 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:28:13.649 +04:00 [INF] Hosting environment: Development
2025-04-06 16:28:13.652 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:29:14.017 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 16:29:14.514 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 16:29:14.666 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 16:29:15.006 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 16:29:25.110 +04:00 [INF] Executed DbCommand (281ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 16:29:25.358 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 16:29:26.755 +04:00 [INF] Executed DbCommand (103ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 16:29:27.424 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 16:29:27.460 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 16:29:27.796 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 13091.5583ms
2025-04-06 16:29:27.829 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 16:29:27.934 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 13951.6541ms
2025-04-06 16:35:37.839 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:35:54.801 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:35:54.855 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:35:57.954 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:35:58.517 +04:00 [INF] Hosting environment: Development
2025-04-06 16:35:58.520 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:37:53.868 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:44:45.610 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:44:58.240 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:44:58.327 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:44:58.703 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:44:58.710 +04:00 [INF] Hosting environment: Development
2025-04-06 16:44:58.715 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:46:35.189 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:46:55.009 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 16:46:55.119 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 16:46:55.704 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 16:46:56.002 +04:00 [INF] Hosting environment: Development
2025-04-06 16:46:56.005 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 16:50:04.134 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:56:30.938 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 16:57:58.061 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 17:06:06.325 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 17:06:10.051 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 17:06:11.113 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 17:06:12.697 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 17:06:12.706 +04:00 [INF] Hosting environment: Development
2025-04-06 17:06:12.734 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 17:06:35.447 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 43
2025-04-06 17:06:36.585 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 17:06:36.778 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 17:06:37.198 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 17:06:54.140 +04:00 [INF] Executed DbCommand (2,196ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u1].[Id], [u1].[Bio], [u1].[Country], [u1].[CreatedDate], [u1].[DateOfBirth], [u1].[Email], [u1].[FirstName], [u1].[Gender], [u1].[LastName], [u1].[ModifiedDate], [u0].[Id], [u0].[Role], [u0].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u1]
LEFT JOIN [UserRoles] AS [u0] ON [u1].[Id] = [u0].[UserId]
ORDER BY [u1].[Id]
2025-04-06 17:06:56.528 +04:00 [INF] Executed DbCommand (158ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 17:07:00.311 +04:00 [INF] Executed DbCommand (1,704ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 17:07:01.675 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 17:07:01.835 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 17:07:02.278 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 25458.7998ms
2025-04-06 17:07:02.440 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 17:07:02.558 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 27141.8572ms
2025-04-06 17:08:24.846 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/verify-otp - application/json 62
2025-04-06 17:08:24.961 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.VerifyOTP (Web.Api)'
2025-04-06 17:08:25.611 +04:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(Core.Infrastructure.Persistence.Users.Features.Commands.VerifyOTPCommand.OTPValidateCommand) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 17:08:26.772 +04:00 [INF] Handling request: OTPValidateCommand, Data: {"email":"alizadeemil5@gmail.com","OTP":"135112","$type":"OTPValidateCommand"}
2025-04-06 17:08:27.469 +04:00 [INF] Executed DbCommand (73ms) [Parameters=[@__email_0='?' (Size = 50), @__OTPCode_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate], [s].[Id], [s].[CreatedDate], [s].[IPAddress], [s].[ModifiedDate], [s].[OTPCode], [s].[OTPExpiryDate], [s].[RefreshToken], [s].[RefreshTokenExpirationDate], [s].[UserId]
FROM [Users] AS [u]
LEFT JOIN [SecurityDetails] AS [s] ON [u].[Id] = [s].[UserId]
WHERE [u].[Email] = @__email_0 AND [s].[OTPCode] = @__OTPCode_1 AND [s].[OTPExpiryDate] > GETUTCDATE()
2025-04-06 17:08:27.546 +04:00 [INF] Executed DbCommand (46ms) [Parameters=[@__email_0='?' (Size = 50), @__OTPCode_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        LEFT JOIN [SecurityDetails] AS [s] ON [u].[Id] = [s].[UserId]
        WHERE [u].[Email] = @__email_0 AND [s].[OTPCode] = @__OTPCode_1 AND [s].[OTPExpiryDate] > GETUTCDATE()) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 17:08:29.593 +04:00 [ERR] Request OTPValidateCommand failed.
Core.Domain.Exceptions.HttpResponseException: Http status code: NotFound



Message: 
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 21
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 17:09:18.263 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.VerifyOTP (Web.Api) in 51543.3461ms
2025-04-06 17:09:18.535 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.VerifyOTP (Web.Api)'
2025-04-06 17:09:18.555 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Core.Domain.Exceptions.HttpResponseException: Http status code: NotFound



Message: 
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 21
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
   at Web.Api.Controllers.AuthController.VerifyOTP(OTPValidateCommand otpValidateCommand) in C:\Users\User\Desktop\PRO-JECT\src\Web.Api\Controllers\AuthController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-06 17:09:21.978 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/verify-otp - 500 null text/plain; charset=utf-8 57134.192ms
2025-04-06 17:09:28.006 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/verify-otp - application/json 62
2025-04-06 17:09:28.086 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.VerifyOTP (Web.Api)'
2025-04-06 17:09:28.092 +04:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(Core.Infrastructure.Persistence.Users.Features.Commands.VerifyOTPCommand.OTPValidateCommand) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 17:09:28.107 +04:00 [INF] Handling request: OTPValidateCommand, Data: {"email":"alizadeemil5@gmail.com","OTP":"135112","$type":"OTPValidateCommand"}
2025-04-06 17:09:35.668 +04:00 [INF] Executed DbCommand (72ms) [Parameters=[@__email_0='?' (Size = 50), @__OTPCode_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate], [s].[Id], [s].[CreatedDate], [s].[IPAddress], [s].[ModifiedDate], [s].[OTPCode], [s].[OTPExpiryDate], [s].[RefreshToken], [s].[RefreshTokenExpirationDate], [s].[UserId]
FROM [Users] AS [u]
LEFT JOIN [SecurityDetails] AS [s] ON [u].[Id] = [s].[UserId]
WHERE [u].[Email] = @__email_0 AND [s].[OTPCode] = @__OTPCode_1 AND [s].[OTPExpiryDate] > GETUTCDATE()
2025-04-06 17:09:36.976 +04:00 [INF] Executed DbCommand (39ms) [Parameters=[@__email_0='?' (Size = 50), @__OTPCode_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        LEFT JOIN [SecurityDetails] AS [s] ON [u].[Id] = [s].[UserId]
        WHERE [u].[Email] = @__email_0 AND [s].[OTPCode] = @__OTPCode_1 AND [s].[OTPExpiryDate] > GETUTCDATE()) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 17:41:48.333 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 17:41:50.947 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 17:41:51.001 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 17:41:51.409 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 17:41:51.418 +04:00 [INF] Hosting environment: Development
2025-04-06 17:41:51.422 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 17:42:26.178 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 41
2025-04-06 17:42:27.007 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 17:42:27.936 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 17:42:28.387 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 17:42:44.574 +04:00 [ERR] Failed executing DbCommand (350ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u2].[Id], [u2].[Bio], [u2].[Country], [u2].[CreatedDate], [u2].[DateOfBirth], [u2].[Email], [u2].[FirstName], [u2].[Gender], [u2].[LastName], [u2].[ModifiedDate], [s].[Id], [s].[Role], [s].[UserRolesId], [s].[UsersId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u2]
LEFT JOIN (
    SELECT [u1].[Id], [u1].[Role], [u0].[UserRolesId], [u0].[UsersId]
    FROM [UserUserRole] AS [u0]
    INNER JOIN [UserRoles] AS [u1] ON [u0].[UserRolesId] = [u1].[Id]
) AS [s] ON [u2].[Id] = [s].[UsersId]
ORDER BY [u2].[Id], [s].[UserRolesId], [s].[UsersId]
2025-04-06 17:42:44.803 +04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Core.Infrastructure.Persistence.Users.Context.UserDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'UserUserRole'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:5abec811-e7f6-4c72-815e-1aaf10b65c57
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'UserUserRole'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:5abec811-e7f6-4c72-815e-1aaf10b65c57
Error Number:208,State:1,Class:16
2025-04-06 17:42:47.408 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'UserUserRole'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method75(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Core.Infrastructure.Persistence.Users.Features.Manager.UserManager.Login(String email, String ipAddress, IUserUnitOfWork uOw) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Manager\UserManager.cs:line 29
   at Core.Infrastructure.Persistence.Users.Features.Commands.LoginCommand.UserRegisterCommandHandler.ExecuteAsync(UserRegisterOrLoginCommand request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Infrastructure\Persistence\Users\Features\Commands\LoginCommand\UserRegisterCommandHandler.cs:line 26
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 18
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
ClientConnectionId:5abec811-e7f6-4c72-815e-1aaf10b65c57
Error Number:208,State:1,Class:16
2025-04-06 18:10:46.627 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 18:10:49.265 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 18:10:49.274 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 18:10:49.868 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 18:10:49.882 +04:00 [INF] Hosting environment: Development
2025-04-06 18:10:49.923 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 18:11:47.116 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 41
2025-04-06 18:11:47.650 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 18:11:47.947 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 18:11:48.492 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 18:13:00.634 +04:00 [INF] Executed DbCommand (924ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u2].[Id], [u2].[Bio], [u2].[Country], [u2].[CreatedDate], [u2].[DateOfBirth], [u2].[Email], [u2].[FirstName], [u2].[Gender], [u2].[LastName], [u2].[ModifiedDate], [s].[UserId], [s].[RoleId], [s].[Id], [s].[Role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u2]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u1].[Id], [u1].[Role]
    FROM [UserAndUserRoles] AS [u0]
    INNER JOIN [UserRoles] AS [u1] ON [u0].[RoleId] = [u1].[Id]
) AS [s] ON [u2].[Id] = [s].[UserId]
ORDER BY [u2].[Id], [s].[UserId], [s].[RoleId]
2025-04-06 18:24:12.032 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 18:24:13.736 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 18:24:13.759 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 18:24:14.301 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 18:24:14.305 +04:00 [INF] Hosting environment: Development
2025-04-06 18:24:14.389 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 18:24:19.667 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 41
2025-04-06 18:24:20.484 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 18:24:20.759 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 18:24:21.197 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 18:24:46.750 +04:00 [INF] Executed DbCommand (301ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u2].[Id], [u2].[Bio], [u2].[Country], [u2].[CreatedDate], [u2].[DateOfBirth], [u2].[Email], [u2].[FirstName], [u2].[Gender], [u2].[LastName], [u2].[ModifiedDate], [s].[UserId], [s].[RoleId], [s].[Id], [s].[Role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u2]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u1].[Id], [u1].[Role]
    FROM [UserAndUserRoles] AS [u0]
    INNER JOIN [UserRoles] AS [u1] ON [u0].[RoleId] = [u1].[Id]
) AS [s] ON [u2].[Id] = [s].[UserId]
ORDER BY [u2].[Id], [s].[UserId], [s].[RoleId]
2025-04-06 18:24:49.086 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 18:24:56.297 +04:00 [INF] Executed DbCommand (437ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Role]
FROM [UserRoles] AS [u]
WHERE [u].[Id] = @__p_0
2025-04-06 18:24:59.750 +04:00 [INF] Executed DbCommand (163ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 500), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (DbType = Int32), @p8='?' (Size = 50), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Bio], [Country], [CreatedDate], [DateOfBirth], [Email], [FirstName], [Gender], [LastName], [ModifiedDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO [UserAndUserRoles] ([RoleId], [UserId])
VALUES (@p10, @p11);
2025-04-06 18:25:37.794 +04:00 [INF] Executed DbCommand (79ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 6), @p4='?' (DbType = DateTime2), @p5='?' (Size = 500), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (Size = 500), @p10='?' (Size = 50), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 50), @p14='?' (Size = 50), @p15='?' (DbType = Int32), @p16='?' (Size = 50), @p17='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [SecurityDetails] SET [CreatedDate] = @p0, [IPAddress] = @p1, [ModifiedDate] = @p2, [OTPCode] = @p3, [OTPExpiryDate] = @p4, [RefreshToken] = @p5, [RefreshTokenExpirationDate] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
UPDATE [Users] SET [Bio] = @p9, [Country] = @p10, [CreatedDate] = @p11, [DateOfBirth] = @p12, [Email] = @p13, [FirstName] = @p14, [Gender] = @p15, [LastName] = @p16, [ModifiedDate] = @p17
OUTPUT 1
WHERE [Id] = @p18;
2025-04-06 18:25:39.982 +04:00 [ERR] Request UserRegisterOrLoginCommand failed.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Core.Application.Repositories.UnitOfWork`1.CommitAsync(CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Repositories\UnitOfWork.cs:line 11
   at Core.Application.Abstractions.CommandHandler`2.Handle(TRequest request, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Abstractions\CommandHandler.cs:line 24
   at Core.Application.Behaviors.Validations.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Validations\ValidationBehavior.cs:line 30
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\Desktop\PRO-JECT\src\Core.Application\Behaviors\Logging\LoggingBehavior.cs:line 20
2025-04-06 18:28:57.916 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 18:28:59.321 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 18:28:59.327 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 18:28:59.720 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 18:28:59.733 +04:00 [INF] Hosting environment: Development
2025-04-06 18:28:59.761 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 18:29:08.111 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 41
2025-04-06 18:29:08.597 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 18:29:08.750 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 18:29:09.335 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 18:29:26.623 +04:00 [INF] Executed DbCommand (397ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u2].[Id], [u2].[Bio], [u2].[Country], [u2].[CreatedDate], [u2].[DateOfBirth], [u2].[Email], [u2].[FirstName], [u2].[Gender], [u2].[LastName], [u2].[ModifiedDate], [s].[UserId], [s].[RoleId], [s].[Id], [s].[Role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u2]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u1].[Id], [u1].[Role]
    FROM [UserAndUserRoles] AS [u0]
    INNER JOIN [UserRoles] AS [u1] ON [u0].[RoleId] = [u1].[Id]
) AS [s] ON [u2].[Id] = [s].[UserId]
ORDER BY [u2].[Id], [s].[UserId], [s].[RoleId]
2025-04-06 18:29:27.351 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 18:29:28.483 +04:00 [INF] Executed DbCommand (81ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 18:29:29.285 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 18:29:29.347 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 18:29:29.707 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 20744.791ms
2025-04-06 18:29:29.722 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 18:29:29.770 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 21681.4764ms
2025-04-06 18:35:37.108 +04:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-06 18:35:39.435 +04:00 [INF] Now listening on: https://localhost:7289
2025-04-06 18:35:39.482 +04:00 [INF] Now listening on: http://localhost:5287
2025-04-06 18:35:39.912 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-06 18:35:39.971 +04:00 [INF] Hosting environment: Development
2025-04-06 18:35:39.976 +04:00 [INF] Content root path: C:\Users\User\Desktop\PRO-JECT\src\Web.Api
2025-04-06 18:35:44.908 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/login - application/json 41
2025-04-06 18:35:45.580 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 18:35:45.851 +04:00 [INF] Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Core.Infrastructure.Persistence.Users.Features.Dtos.LoginDto) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 18:35:46.189 +04:00 [INF] Handling request: UserRegisterOrLoginCommand, Data: {"email":"alizadeemil5@gmail.com","ipAddress":"0.0.0.1","$type":"UserRegisterOrLoginCommand"}
2025-04-06 18:36:05.686 +04:00 [INF] Executed DbCommand (503ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [u2].[Id], [u2].[Bio], [u2].[Country], [u2].[CreatedDate], [u2].[DateOfBirth], [u2].[Email], [u2].[FirstName], [u2].[Gender], [u2].[LastName], [u2].[ModifiedDate], [s].[UserId], [s].[RoleId], [s].[Id], [s].[Role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate]
    FROM [Users] AS [u]
    WHERE [u].[Email] = @__email_0
) AS [u2]
LEFT JOIN (
    SELECT [u0].[UserId], [u0].[RoleId], [u1].[Id], [u1].[Role]
    FROM [UserAndUserRoles] AS [u0]
    INNER JOIN [UserRoles] AS [u1] ON [u0].[RoleId] = [u1].[Id]
) AS [s] ON [u2].[Id] = [s].[UserId]
ORDER BY [u2].[Id], [s].[UserId], [s].[RoleId]
2025-04-06 18:36:06.018 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 18:36:07.294 +04:00 [INF] Executed DbCommand (106ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2), @p4='?' (Size = 6), @p5='?' (DbType = DateTime2), @p6='?' (Size = 500), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SecurityDetails] ([Id], [CreatedDate], [IPAddress], [ModifiedDate], [OTPCode], [OTPExpiryDate], [RefreshToken], [RefreshTokenExpirationDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-04-06 18:36:07.975 +04:00 [INF] Request UserRegisterOrLoginCommand handled successfully.
2025-04-06 18:36:08.025 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.UserDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 18:36:08.398 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.SignIn (Web.Api) in 22517.528ms
2025-04-06 18:36:08.434 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.SignIn (Web.Api)'
2025-04-06 18:36:08.508 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/login - 200 null application/json; charset=utf-8 23623.9698ms
2025-04-06 18:36:47.354 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7289/api/auth/verify-otp - application/json 62
2025-04-06 18:36:47.548 +04:00 [INF] Executing endpoint 'Web.Api.Controllers.AuthController.VerifyOTP (Web.Api)'
2025-04-06 18:36:47.592 +04:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(Core.Infrastructure.Persistence.Users.Features.Commands.VerifyOTPCommand.OTPValidateCommand) on controller Web.Api.Controllers.AuthController (Web.Api).
2025-04-06 18:36:47.671 +04:00 [INF] Handling request: OTPValidateCommand, Data: {"email":"alizadeemil5@gmail.com","OTP":"677488","$type":"OTPValidateCommand"}
2025-04-06 18:36:58.286 +04:00 [INF] Executed DbCommand (706ms) [Parameters=[@__email_0='?' (Size = 50), @__OTPCode_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Bio], [u].[Country], [u].[CreatedDate], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[Gender], [u].[LastName], [u].[ModifiedDate], [s].[Id], [s].[CreatedDate], [s].[IPAddress], [s].[ModifiedDate], [s].[OTPCode], [s].[OTPExpiryDate], [s].[RefreshToken], [s].[RefreshTokenExpirationDate], [s].[UserId]
FROM [Users] AS [u]
LEFT JOIN [SecurityDetails] AS [s] ON [u].[Id] = [s].[UserId]
WHERE [u].[Email] = @__email_0 AND [s].[OTPCode] = @__OTPCode_1 AND [s].[OTPExpiryDate] > GETUTCDATE()
2025-04-06 18:37:16.245 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[@__email_0='?' (Size = 50), @__OTPCode_1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        LEFT JOIN [SecurityDetails] AS [s] ON [u].[Id] = [s].[UserId]
        WHERE [u].[Email] = @__email_0 AND [s].[OTPCode] = @__OTPCode_1 AND [s].[OTPExpiryDate] > GETUTCDATE()) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-06 18:37:34.232 +04:00 [INF] Executed DbCommand (77ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Bio] = @p0, [Country] = @p1, [CreatedDate] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [FirstName] = @p5, [Gender] = @p6, [LastName] = @p7, [ModifiedDate] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-04-06 18:37:34.321 +04:00 [INF] Request OTPValidateCommand handled successfully.
2025-04-06 18:37:34.329 +04:00 [INF] Executing OkObjectResult, writing value of type 'Core.Application.Common.Result`2[[Core.Infrastructure.Persistence.Users.Features.Dtos.VerificationOTPDto, Core.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Core.Application.Common.Error, Core.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-06 18:37:34.350 +04:00 [INF] Executed action Web.Api.Controllers.AuthController.VerifyOTP (Web.Api) in 46744.0332ms
2025-04-06 18:37:34.355 +04:00 [INF] Executed endpoint 'Web.Api.Controllers.AuthController.VerifyOTP (Web.Api)'
2025-04-06 18:37:34.371 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7289/api/auth/verify-otp - 200 null application/json; charset=utf-8 47017.7172ms
